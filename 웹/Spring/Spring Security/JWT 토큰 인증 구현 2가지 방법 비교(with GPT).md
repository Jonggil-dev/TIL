# JWT 토큰 인증 구현 2가지 방법 비교(with GPT)

### 1. Question

: 내가 지금 하려는게 JWT토큰을 통해 인증 과정을 구현하려고 해. 그런데 내가 생각해낸 방법이 2가지 있어.

1. Security에서 제공하는 form 로그인을 활용하는 방법.
   - 이 방법은 기본적으로 Security의 form 로그인 인증 프로세스를 이용해. 몇 가지 커스텀 해야 될 거는 request 데이터를 JSON타입으로 수신하는 것, 그리고 인증이 완료된 후 세션-쿠키 발급을 막고 JWT토큰을 생성해서 클라이언트에게 응답하도록 하는것. 이렇게 2가지를 커스텀해서 JWT인증 과정을 구현하려고 해 

2. Request가 filterchain을 거치지 않고 Controller에서 login 인증 로직을 구현해서 처리하는 방법. 
   - 이 방법은 form Login을 비활성화 하고 Login Controller와 서비스 로직을 구현해 놓고 요청을 처리하는 방법이야. Service로직에서는 filterchain에서 사용하는 일부 객체들을 사용해서 인증 과정을 구현할 꺼야. 

위 2가지 방법 중에 일반적으로 JWT 토큰 인증 방법을 구현할 때 많이 사용하는 방법이랑 이유를 알려줘, 그리고 각 방법의 장단점에 대해서도 설명해줘



### 2. Answer

: JWT 토큰을 사용하여 인증 과정을 구현할 때, 일반적으로 두 가지 방법 중 하나를 선택할 수 있습니다. 각 방법의 일반적인 사용 사례와 장단점을 분석해 보겠습니다.

- #### Security의 filterChain을 거치는 로그인 로직

  - **사용 사례**
    - 이 방법은 Spring Security의 기존 인프라를 최대한 활용하고 싶을 때 유용합니다. Spring Security가 제공하는 인증 메커니즘, 필터 체인, 세션 관리 등의 보안 기능을 효과적으로 이용할 수 있습니다.

  - **장점**

    - **통합 보안 기능**: Spring Security의 보안 기능들이 통합되어 있어, 추가적인 보안 조치 없이도 많은 보안 이슈를 자동으로 해결할 수 있습니다.

    - **유지보수의 용이성**: Spring Security의 표준 패턴을 따르므로, 코드의 일관성과 이해도가 높아 유지보수가 쉽습니다.

    - **확장성**: Spring Security는 매우 유연하며, 필요에 따라 다양한 방식으로 확장할 수 있습니다.


  - **단점**

    - **커스텀 처리 필요성**: JSON 요청 수신과 JWT 토큰 발급 등 특정 부분에서 커스텀 처리가 필요하며, 이를 위한 추가 개발 작업이 필요합니다.

    - **오버헤드**: Spring Security의 많은 기능이 애플리케이션에 필요하지 않음에도 불구하고 처리되어야 할 수 있어, 성능상의 오버헤드가 발생할 수 있습니다.


- #### Controller에서 login 인증 로직을 직접 구현하는 방법

  - **사용 사례**
    - 이 방법은 매우 커스텀된 인증 로직을 필요로 하거나, 기존의 Spring Security의 동작 방식과 다르게 동작해야 할 때 선택할 수 있습니다. 

  - **장점**

    - **유연성**: 개발자가 인증 과정을 완전히 제어할 수 있으므로, 매우 특정한 요구 사항에 맞춰서 구현이 가능합니다.

    - **성능 최적화**: 불필요한 Spring Security의 처리 과정을 생략하므로, 애플리케이션의 성능을 최적화할 수 있습니다.

    - **단점**

  - **보안 취약점**: Spring Security가 제공하는 자동화된 보안 기능을 포기하게 되므로, 개발자가 직접 모든 보안 취약점을 관리해야 합니다.

  - **개발 및 유지보수 비용**: 인증 시스템을 처음부터 구현해야 하므로 개발 비용이 증가하며, 오류 발생 가능성도 높아집니다.




### - 일반적으로 많이 사용하는 방법

일반적으로는 **첫 번째 방법**이 많이 사용됩니다. 이유는 Spring Security의 robust한 보안 기능을 이용할 수 있고, 시스템의 보안을 강화할 수 있기 때문입니다. 또한, Spring 생태계 내에서 통합적으로 관리할 수 있는 장점이 있습니다. JWT 토큰을 발급하고 관리하는 부분은 커스텀 필터나 인증 성공 핸들러에서 처리할 수 있으며, 이를 통해 유연성과 보안을 동시에 확보할 수 있습니다. 대부분의 현대적인 애플리케이션은 이 방식을 선호합니다.
