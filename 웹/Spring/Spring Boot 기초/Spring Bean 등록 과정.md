# Spring Bean 등록 과정

- 여기서 말하는 "빈 등록"은 Spring 컨테이너에 클래스의 인스턴스를 등록하는 전체 과정을 포함

### 1. 애플리케이션 실행 시작

- 애플리케이션을 실행하면, Spring Boot와 같은 프레임워크는 내부적으로 `ApplicationContext`를 생성합니다. 이 컨텍스트는 애플리케이션의 설정 정보를 로드하고, 빈의 생명 주기를 관리하는 컨테이너 역할을 합니다.

### 2. 컴포넌트 스캔 (Component Scanning)
- **스캔 설정**: `@ComponentScan` 어노테이션을 사용하거나 Spring Boot의 자동 설정 기능을 통해, Spring은 지정된 패키지(보통 애플리케이션의 기본 패키지와 그 하위 패키지) 내의 클래스들을 스캔합니다.
- **클래스 식별**: 스캔 과정 중에, `@Component`, `@Service`, `@Repository`, `@Controller` 등의 어노테이션이 붙은 클래스들을 찾아냅니다. 이 어노테이션들은 모두 `@Component`의 특수화된 형태이며, 클래스를 빈으로 등록하기 위한 후보로 표시합니다.

### 3. 빈 정의 생성 (Bean Definition Creation)
- **빈 정의**: 스캔된 각 클래스에 대해, Spring은 "빈 정의"(`BeanDefinition`)를 생성합니다. 이 빈 정의는 클래스에 대한 메타데이터를 포함하고 있으며, 인스턴스를 어떻게 생성하고 관리할지에 대한 정보를 담고 있습니다.
- **등록**: 생성된 빈 정의는 Spring의 애플리케이션 컨텍스트의 빈 팩토리에 등록됩니다. 이 단계에서는 아직 인스턴스가 생성되지 않습니다.

### 4. 빈 인스턴스화 (Bean Instantiation)
- **의존성 주입 포인트 식별**: 빈 팩토리는 빈 정의에 기반하여 각 클래스의 인스턴스를 생성할 준비를 합니다. 이 때, 생성자 주입이 필요한 경우, 필요한 의존성을 파악합니다.
- **인스턴스 생성**: 의존성이 모두 준비되면, Spring은 빈 팩토리를 통해 실제 클래스의 인스턴스를 생성합니다. 생성자 주입, 세터 주입, 혹은 필드 주입을 통해 의존성을 주입합니다.

### 5. 초기화 및 사용 준비 (Initialization)
- **후처리**: 인스턴스 생성 후, Spring은 빈 후처리기(`BeanPostProcessor`)를 사용하여 인스턴스에 대한 추가 처리를 수행할 수 있습니다. 예를 들어, `@PostConstruct` 어노테이션이 붙은 메소드를 실행합니다.
- **빈 등록 완료**: 이제 해당 인스턴스는 Spring 컨테이너에 완전히 등록되어, 애플리케이션 전반에서 사용할 준비가 완료됩니다.
