# RabbitMQ 세팅 고민 메모

### + 해결 X

- GPS 데이터의 경우 특정 시간내에 처리되지 않은 데이터의 경우 필요가 없어 보임 (빠른 속도로 처리돼서 알림을 발송해야 의미가 있음) -> 메시지에 TTL 설정해서 빠른 시간내에 처리되지 않은 데이터는 큐에서 삭제 하는게 맞을지? -> 그런데 TTL 설정 자체가 큐에서 별도의 연산을 추가하는 거니까 큐의 GPS 처리 속도 자체에 영향을 미쳐서 전체 시스템에 속도 저하가 발생하는게 아닌지 확인 필요할듯

---



### 1. 큐 타입 선정

- GPS를 실시간으로 수신받는 큐를 구성하는데 있어, 데이터 처리의 지속성과 높은 처리량을 고려하면 **Stream** 큐 타입이 이러한 요구사항에 적합. 그러나, **Classic** 큐 타입의 경우에도 초당 수천 개의 메시지까지는 쉽게 처리할 수 있으므로, 비교적 구성이 간단하며 관리가 용이한 **Classic** 큐 타입을 선정

- 추후 확장성을 고려했을 때, 부하 테스트를 통해 **Stream** 타입 적용 검토 必

  

### 2. Exchange 타입과 큐 생성 전략

- 본 프로젝트의 개발 단계에서는 사용자의 지역을 1곳 으로 가정하기에, 우선 Direct Exchange 타입과 Classic 큐 1개로 구성하여 개발함 (라우팅 키를 확인하는 과정에서 Topic 타입이 Direct 타입 보다는 복잡한 연산이라 성능이 느릴거라 생각함)
- 추후 확장성을 고려 했을 때, 사용자의 지역별로 각 큐를 구성하여 GPS 처리를 병렬로 수행하는 것이 병목 현상이나 처리속도에 있어서 효율적임.  이를 위해 Topic Exchange 타입으로 사용자 그룹에 따라 다르게 처리할 수 있도록 해야 함